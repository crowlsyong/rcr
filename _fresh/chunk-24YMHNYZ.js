import{a as e}from"./chunk-MEABNXAK.js";import{a as o,b as x}from"./chunk-NGSZJRVL.js";function h({calculation:t,apiKey:u,budgetPercentage:A}){let[c,g]=o(!1),[a,l]=o(!1),[m,f]=o(null),[b,d]=o(null),[y,p]=o(null);x(()=>{let s;return a&&(s=setTimeout(()=>l(!1),4e3)),()=>clearTimeout(s)},[a]);let k=async()=>{g(!0),f(null),d(null),p(null);let s=A/100,n={apiKey:u,betA:{contractId:t.marketA.id,amount:t.betAmountA*s,outcome:t.betOutcomeA},betB:{contractId:t.marketB.id,amount:t.betAmountB*s,outcome:t.betOutcomeB}};try{let r=await fetch("/api/v0/arbitrage/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await r.json();if(!r.ok||!i.success)throw new Error(i.error||"An unknown error occurred");p(i),f(i.message||"Arbitrage bets placed successfully!")}catch(r){d(typeof r=="object"&&r!==null&&"message"in r?r.message:String(r))}finally{g(!1)}};return e("div",{class:"mt-3",children:[e("button",{type:"button",onClick:()=>{a?(k(),l(!1)):l(!0)},disabled:c||!u,class:`w-full flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-yellow-700 hover:bg-yellow-800 focus:ring-yellow-400":"bg-green-600 hover:bg-green-700 focus:ring-green-500"}`,children:c?"Placing Bets...":a?"Are you sure? Click to Confirm":"Place Arbitrage Bets"}),(()=>{if(b)return e("p",{class:"mt-2 text-red-400 text-xs",children:["Error: ",b]});if(m){let s=y?.betDetails;return e("div",{class:"mt-2 text-green-400 text-xs",children:[e("p",{children:m}),s&&e("ul",{class:"list-disc list-inside text-gray-400 text-xxs mt-1",children:s.map((n,r)=>e("li",{children:[n.market,": ",n.status," ",n.amount!==void 0&&n.status==="placed"?`(M${n.amount.toFixed(0)})`:""]},r))}),t.marketA.url&&t.marketB.url&&e("p",{class:"mt-1",children:["View on Manifold: ",e("a",{href:t.marketA.url,target:"_blank",rel:"noopener noreferrer",class:"underline text-blue-400 hover:text-blue-300",children:"Market A"})," ","&"," ",e("a",{href:t.marketB.url,target:"_blank",rel:"noopener noreferrer",class:"underline text-blue-400 hover:text-blue-300",children:"Market B"})]})]})}return null})()]})}export{h as a};
