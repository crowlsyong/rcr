import{b as d}from"./chunk-CRCKSX74.js";import{a as e}from"./chunk-MEABNXAK.js";import{b as f,c as x}from"./chunk-NGSZJRVL.js";function S({userOverview:o,modifyingEvent:t,setModifyingEvent:p,isSubmitting:n,submitMessage:b,submitMessageType:I,onSubmit:y,onSuccess:w,onError:c}){let a=d(null),l=d(""),u=d(""),s=d(""),m=x(null);f(()=>{t?(a.value=t.modifier,l.value=new Date(t.dateOfInfraction).toISOString().split("T")[0],u.value=t.url,s.value=t.description):(a.value=null,u.value="",s.value="",!l.value&&m.current&&(l.value=new Date().toISOString().split("T")[0]))},[t]),f(()=>{!l.value&&m.current&&(l.value=new Date().toISOString().split("T")[0])},[]);let h=async r=>{if(r.preventDefault(),!o||!o.userId){c("Please select a valid user first.");return}if(a.value===null||isNaN(a.value)||!s.value||!u.value||!l.value){c("Please fill all adjustment fields.");return}let g=new Date(l.value).getTime();if(isNaN(g)){c("Please select a valid date for the infraction.");return}let v={userId:o.userId,username:o.username,modifier:a.value,url:u.value,dateOfInfraction:g,description:s.value};t&&(v.originalTimestamp=t.timestamp);try{await y(v),a.value=null,l.value=new Date().toISOString().split("T")[0],u.value="",s.value="",p(null),w()}catch(i){c(`Error: ${typeof i=="object"&&i!==null&&"message"in i?i.message:String(i)}`)}},T=r=>r?new Date(r).toLocaleDateString():"N/A";return e("form",{onSubmit:h,class:"space-y-4 bg-gray-800 p-6 rounded-lg border border-gray-700",children:[e("h3",{class:"text-lg font-bold text-white mb-4",children:t?`Modify Adjustment for ${t.username} on ${T(t.dateOfInfraction)}`:"Add New Adjustment:"}),e("div",{class:"flex flex-col sm:flex-row gap-4",children:[e("div",{class:"flex-1",children:[e("label",{htmlFor:"modifier",class:"block text-sm font-medium text-gray-300",children:"Score Modifier (e.g., -50, +25):"}),e("input",{id:"modifier",type:"number",value:a.value!==null?a.value.toString():"",onInput:r=>a.value=parseInt(r.target.value)||null,class:"w-full p-2 bg-gray-900 text-white border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]}),e("div",{class:"flex-1",children:[e("label",{htmlFor:"date",class:"block text-sm font-medium text-gray-300",children:"Date of Infraction/Event:"}),e("input",{ref:m,id:"date",type:"date",value:l.value,onInput:r=>l.value=r.target.value,class:"w-full p-2 bg-gray-900 text-white border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]})]}),e("div",{children:[e("label",{htmlFor:"url",class:"block text-sm font-medium text-gray-300",children:"Related URL (e.g., Manifold comment, market):"}),e("input",{id:"url",type:"url",value:u.value,onInput:r=>u.value=r.target.value,placeholder:"https://manifold.markets/...",class:"w-full p-2 bg-gray-900 text-white border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]}),e("div",{children:[e("label",{htmlFor:"description",class:"block text-sm font-medium text-gray-300",children:'Description (e.g., "Late repayment of loan #123"):'}),e("textarea",{id:"description",value:s.value,onInput:r=>s.value=r.target.value,rows:3,class:"w-full p-2 bg-gray-900 text-white border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]}),e("button",{type:"submit",class:`w-full py-3 px-4 rounded-md font-semibold text-lg transition-colors duration-200 ${n||!o?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,disabled:n||!o,children:n?"Applying Adjustment...":t?"Update Adjustment":"Apply Adjustment"}),t&&e("button",{type:"button",onClick:()=>{p(null)},class:"w-full py-2 mt-2 px-4 rounded-md text-sm bg-gray-700 hover:bg-gray-600 text-white transition-colors duration-200",disabled:n,children:"Cancel Modify"}),b&&e("p",{class:`mt-4 text-center text-sm ${I==="error"?"text-red-400":"text-green-400"}`,children:b})]})}export{S as a};
