import{a as n}from"./chunk-MEABNXAK.js";import{a as o,b as x}from"./chunk-NGSZJRVL.js";function w(t){let[u,d]=o(!1),[m,f]=o(null),[g,l]=o(null),[i,c]=o(!1);x(()=>{let r;return i&&(r=setTimeout(()=>c(!1),4e3)),()=>clearTimeout(r)},[i]);let b=async()=>{d(!0),f(null),l(null);let r=t.orders.flatMap(e=>{let s=[];return e.yesAmount>=1&&s.push({amount:e.yesAmount,outcome:"YES",limitProb:e.yesProb}),e.noAmount>=1&&s.push({amount:e.noAmount,outcome:"NO",limitProb:e.noProb}),s}),a={apiKey:t.apiKey,contractId:t.contractId,orders:r,...t.answerId&&{answerId:t.answerId},...t.expirationSettings.type==="duration"&&t.expirationSettings.value&&{expiresMillisAfter:t.expirationSettings.value},...t.expirationSettings.type==="date"&&t.expirationSettings.value&&{expiresAt:t.expirationSettings.value}};try{let e=await fetch("/api/v0/limits/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await e.json();!e.ok||!s.success?l(s.error||"Failed to place orders"):f(s.message||"Orders placed successfully!")}catch(e){l(`Network error: ${typeof e=="object"&&e!==null&&"message"in e?e.message:String(e)}`)}finally{d(!1)}},y=()=>{i?(b(),c(!1)):c(!0)},p=t.orders.reduce((r,a)=>r+(a.yesAmount>=1?1:0)+(a.noAmount>=1?1:0),0),h=i?"Are you sure? Click to Confirm":`Place All ${p} Limit Orders`;return n("div",{class:"mb-4",children:[n("h4",{class:"font-medium text-gray-300 mb-2",children:"1. Direct Execution"}),n("p",{class:"mb-2 text-gray-400 text-sm",children:"Place all orders securely through our server. The backend will attempt to place all orders and cancel successful ones if a subsequent order fails."}),n("button",{type:"button",onClick:y,disabled:u,class:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${i?"bg-yellow-700 hover:bg-yellow-800 focus:ring-yellow-400":"bg-green-600 hover:bg-green-700 focus:ring-green-500"}`,children:u?"Placing Orders...":h}),m&&n("div",{class:"mt-2 text-sm flex items-center gap-2",children:[n("span",{class:"text-green-400",children:m}),n("a",{href:t.marketUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-400 hover:underline",children:"(Go to Market)"})]}),g&&n("p",{class:"mt-2 text-red-400 text-sm",children:["Error: ",g]})]})}export{w as a};
