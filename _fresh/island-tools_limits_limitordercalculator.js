import{a as H}from"./chunk-TL3IMOJN.js";import{a as z}from"./chunk-UEW6GMLF.js";import"./chunk-FY5XLUFK.js";import"./chunk-MDKWYR7H.js";import"./chunk-VJKCRGMR.js";import"./chunk-UDB5F2VA.js";import"./chunk-7UDLBCHB.js";import"./chunk-KJUIZF3L.js";import"./chunk-VDHCVOLT.js";import"./chunk-LXVAW3J2.js";import"./chunk-2KIHA6BK.js";import"./chunk-EPD7645U.js";import{a as K}from"./chunk-VP4JNRPT.js";import{a as _}from"./chunk-ANFNCJJN.js";import{a as $}from"./chunk-FN46GB3D.js";import"./chunk-EJWRTPIH.js";import"./chunk-PZAS25NI.js";import{a as J}from"./chunk-6I7LZQQM.js";import"./chunk-FIKXSFMI.js";import"./chunk-HFIS46HI.js";import{a as V}from"./chunk-TBPJSOHY.js";import"./chunk-VF3G6GHT.js";import{a as j}from"./chunk-FXIQ5MN4.js";import{b as F}from"./chunk-CRCKSX74.js";import"./chunk-GI7LLYGM.js";import"./chunk-HNGXSQHJ.js";import{i as R,j as Y}from"./chunk-URWAKGWD.js";import{a as e}from"./chunk-MEABNXAK.js";import{a as s,b as m}from"./chunk-NGSZJRVL.js";import{d as q}from"./chunk-V66ALGLP.js";var X=Y,G=R;function le(){let[y,W]=s(""),[b,w]=s(25),[f,I]=s(75),[c,M]=s(1e3),[g,Q]=s(""),[i,Z]=s(!1),[h,ee]=s(1),[n,k]=s(!1),[x,te]=s(null),[r,A]=s(null),[l,T]=s(null),[a,p]=s(null),[re,O]=s(!1),[E,P]=s(null),[L,S]=s(null),[B,se]=s(25),[N,ae]=s(75),v=F(50),[U,ne]=s(!1);m(()=>{ne(!0)},[]);let D=()=>{if(r){if(r.outcomeType==="BINARY"&&typeof r.probability=="number")return r.probability*100;if(r.outcomeType==="MULTIPLE_CHOICE"&&l){let t=r.answers?.find(o=>o.id===l);return t?t.probability*100:void 0}}};m(()=>{let t=D();typeof t=="number"&&(v.value=Math.round(t))},[r,l]),m(()=>{n?(se(b),ae(f),w(1),I(99)):(w(B),I(N))},[n]),m(()=>{let t=setTimeout(async()=>{let o=y.split("/").pop()?.trim();if(!o){A(null),P(null),p(null);return}O(!0),P(null);try{let d=await fetch(`/api/v0/market/${o}`),C=await d.json();if(!d.ok)throw new Error(C.error||"Failed to fetch market data");r?.id!==C.id&&T(null),A(C)}catch(d){P(`An unexpected error occurred: ${typeof d=="object"&&d!==null&&"message"in d?d.message:String(d)}`),A(null)}finally{O(!1)}},500);return()=>clearTimeout(t)},[y]),m(()=>{if(S(null),!r||c<=0||r.outcomeType==="MULTIPLE_CHOICE"&&!l){p(null);return}let t=$({marketUrlInput:y,lowerProbabilityInput:b,upperProbabilityInput:f,totalBetAmountInput:c,isVolatilityBet:i,granularityInput:h});if(t){t==="Lower probability must be less than upper probability"?(S("Please enter a valid probability range to see calculations."),p(null)):p({orders:[],totalSharesAcquired:null,error:t,contractId:null,answerId:null});return}let{orders:o,totalShares:d}=j({lowerProbability:b/100,upperProbability:f/100,totalBetAmount:c,isVolatilityBet:i,granularity:h,advancedPoints:n?x:null,currentProbabilityForAdvanced:n?v.value:void 0});if(o.length===0&&(!n||x&&x.length>0)){p({orders:[],totalSharesAcquired:null,error:"Could not calculate any valid orders for the given range and budget",contractId:r.id,answerId:l});return}p({orders:o,totalSharesAcquired:d,error:null,contractId:r.id,answerId:l})},[r,l,b,f,c,i,h,n,x,B,N,v.value]);let oe=a&&!a.error&&a.orders&&a.orders.length>0,u=t=>Number.isInteger(t)?t.toString():t.toFixed(2);return e("div",{class:`p-4 mx-auto w-full text-gray-100 ${n?"sm:max-w-screen-lg":"sm:max-w-screen-md"}`,children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h1",{class:"text-2xl font-bold",children:"\u{1F99D} Limit Order App"}),e("a",{href:"/limits/advanced",class:"text-xs px-3 py-1 rounded-md border border-gray-600 bg-gray-700 text-gray-200 hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors duration-200",children:"Advanced Version \u2192"})]}),e("p",{class:"mb-6 text-gray-300",children:["This tool calculates how to split your budget into two limit orders to acquire the same number of shares for both YES and NO outcomes within your chosen range. Inspired by"," ",e("a",{href:"https://docs.manifold.markets/faq#example",target:"_blank",rel:"noopener noreferrer",class:"text-blue-400 hover:underline",children:["this section"," "]}),"of the Manifold FAQ. Works for BINARY and MULTIPLE_CHOICE markets."]}),e(K,{marketUrlInput:y,setMarketUrlInput:W,totalBetAmountInput:c,setTotalBetAmountInput:M,apiKeyInput:g,setApiKeyInput:Q,loading:re,onSubmit:t=>t.preventDefault(),isAdvancedMode:n,marketData:r,selectedAnswerId:l}),E&&e("p",{class:"text-red-400 mb-4",children:["Error: ",E]}),L&&e("p",{class:"text-gray-400 mb-4 text-center",children:L}),a&&a.error&&e("p",{class:"text-red-400 mb-4",children:["Calculation Error: ",a.error]}),r&&r.outcomeType==="MULTIPLE_CHOICE"&&r.answers&&e(V,{answers:r.answers,selectedAnswerId:l,onAnswerSelect:T}),oe&&e("div",{class:"bg-gray-800 shadow overflow-hidden sm:rounded-lg p-6 mb-6 border border-gray-700",children:[e("h2",{class:"text-xl font-semibold mb-3 text-white",children:"Calculated Limit Orders"}),e("p",{class:"mb-6",children:["With a total budget of M",e("span",{class:"font-bold text-white",children:u(c)}),", you will acquire a total of approximately"," ",e("span",{class:"font-bold text-white",children:[u(a.totalSharesAcquired)," shares"]})," ","across all orders."]}),g.length>7&&e("div",{class:"mb-6 pt-4 p-4 border border-gray-700 rounded-lg bg-gray-800/50",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("div",{class:"flex items-center",children:[e("label",{class:"block text-xs sm:text-sm font-medium text-gray-300 mr-4 sm:mr-2",children:"Volatility Bet"}),e("button",{type:"button",onClick:()=>{Z(!i),i&&k(!1)},class:"flex items-center focus:outline-none","aria-pressed":i,children:U?i?e(X,{size:40,class:"w-10 h-10 text-blue-500"}):e(G,{size:40,class:"w-10 h-10 text-gray-500"}):e("div",{class:"w-10 h-10 bg-gray-700 rounded-full animate-pulse"})})]}),i&&e("div",{class:"flex items-center",children:[e("label",{class:"text-xs sm:text-sm font-medium text-gray-300 mr-3",children:"Advanced Mode"}),e("button",{type:"button",onClick:()=>k(!n),class:"flex items-center focus:outline-none","aria-pressed":n,children:U?n?e(X,{size:40,class:"w-10 h-10 text-blue-500"}):e(G,{size:40,class:"w-10 h-10 text-gray-500"}):e("div",{class:"w-10 h-10 bg-gray-700 rounded-full animate-pulse"})})]})]}),e("p",{class:"text-xs text-gray-500 mt-1 mb-2",children:"Distributes the budget across multiple orders within the range to profit from smaller price movements."}),i&&e(q,{children:!n&&e(H,{granularity:h,setGranularity:ee,isAdvancedMode:n})})]}),!n&&e(J,{marketData:r,selectedAnswerId:l,lowerProbability:b,setLowerProbability:w,upperProbability:f,setUpperProbability:I}),i&&n&&e(z,{totalBetAmount:c,lowerProbability:1,upperProbability:99,onDistributionChange:te,onBetAmountChange:M,marketProbability:D(),currentProbability:v,marketData:r,selectedAnswerId:l}),n?e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4 text-xxs",children:[e("div",{class:"space-y-2",children:[e("h3",{class:"font-semibold text-green-400 mb-2",children:"YES Bets"}),e("ul",{class:"space-y-2",children:[a.orders.filter(t=>t.yesAmount>0).map((t,o)=>e("li",{class:"p-2 bg-gray-900/50 rounded-md border border-gray-700",children:[e("div",{class:"font-semibold text-gray-300 mb-1",children:["Order (Acquires ~",u(t.shares)," shares)"]}),e("span",{children:["Bet"," ",e("span",{class:"font-bold text-green-400",children:"YES"})," at"," ",Math.round(t.yesProb*100),"%:"," ",e("span",{class:"font-bold text-white",children:["M",u(t.yesAmount)]})]})]},`yes-${o}`)),a.orders.filter(t=>t.yesAmount>0).length===0&&e("p",{class:"text-gray-500",children:"No YES bets calculated."})]})]}),e("div",{class:"space-y-2",children:[e("h3",{class:"font-semibold text-red-400 mb-2",children:"NO Bets"}),e("ul",{class:"space-y-2",children:[a.orders.filter(t=>t.noAmount>0).sort((t,o)=>o.noProb-t.noProb).map((t,o)=>e("li",{class:"p-2 bg-gray-900/50 rounded-md border border-gray-700",children:[e("div",{class:"font-semibold text-gray-300 mb-1",children:["Order (Acquires ~",u(t.shares)," shares)"]}),e("span",{children:["Bet ",e("span",{class:"font-bold text-red-400",children:"NO"})," ","at ",Math.round(t.noProb*100),"%:"," ",e("span",{class:"font-bold text-white",children:["M",u(t.noAmount)]})]})]},`no-${o}`)),a.orders.filter(t=>t.noAmount>0).length===0&&e("p",{class:"text-gray-500",children:"No NO bets calculated."})]})]})]}):e("ul",{class:"space-y-3 mt-4 text-gray-200 text-xs",children:a.orders.map((t,o)=>e("li",{class:"p-2 bg-gray-900/50 rounded-md border border-gray-700",children:[e("div",{class:"font-semibold text-gray-300 mb-1",children:["Order Pair #",o+1," (Acquires ~",u(t.shares)," shares)"]}),e("div",{class:"flex justify-between flex-wrap gap-2",children:[e("span",{children:["Bet ",e("span",{class:"font-bold text-green-400",children:"YES"})," at"," ",Math.round(t.yesProb*100),"%:"," ",e("span",{class:"font-bold text-white",children:["M",u(t.yesAmount)]})]}),e("span",{children:["Bet ",e("span",{class:"font-bold text-red-400",children:"NO"})," at"," ",Math.round(t.noProb*100),"%:"," ",e("span",{class:"font-bold text-white",children:["M",u(t.noAmount)]})]})]})]},o))}),g&&a.contractId&&r?.url&&e(_,{orders:a.orders,apiKey:g,contractId:a.contractId,answerId:a.answerId,marketUrl:r.url})]})]})}export{le as default};
