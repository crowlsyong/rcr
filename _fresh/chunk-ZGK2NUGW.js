import{a as e}from"./chunk-MEABNXAK.js";import{a as m,e as a}from"./chunk-NGSZJRVL.js";function y({overrideEvents:d,userId:o,username:n,isLoadingParent:l,onDeleteSuccess:x,onModify:c}){let[s,i]=m({}),g=a(async t=>{if(!s[t.timestamp]){i(r=>({...r,[t.timestamp]:!0})),setTimeout(()=>{i(r=>({...r,[t.timestamp]:!1}))},3e3);return}console.log("[ExistingOverridesTable] Deleting override:",t);try{let r=await fetch("/api/v0/admin/delete-override",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o,timestamp:t.timestamp})}),p=await r.json();if(!r.ok||!p.success)throw new Error(p.error||"Failed to delete adjustment.");console.log("[ExistingOverridesTable] Override deleted successfully."),i({}),x()}catch(r){console.error(`[ExistingOverridesTable] Error deleting override: ${typeof r=="object"&&r!==null&&"message"in r?r.message:String(r)}`)}},[o,x,s]),u=a(t=>{c(t)},[c]),f=t=>t?new Date(t).toLocaleDateString():"N/A";return d.length===0?e("div",{class:"p-4 bg-gray-800 rounded-lg shadow-inner border border-gray-700",children:[e("h4",{class:"text-md font-semibold text-white mb-4",children:["Existing Overrides for @",n,":"]}),e("p",{class:"text-gray-400 text-sm",children:"No existing overrides for this user."})]}):e("div",{class:"p-4 bg-gray-800 rounded-lg shadow-inner border border-gray-700",children:[e("h4",{class:"text-md font-semibold text-white mb-4",children:["Existing Overrides for @",n,":"]}),e("div",{class:"overflow-x-auto",children:e("table",{class:"min-w-full divide-y divide-gray-700",children:[e("thead",{class:"bg-gray-700",children:e("tr",{children:[e("th",{class:"px-4 py-2 text-left text-xxs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),e("th",{class:"px-4 py-2 text-left text-xxs font-medium text-gray-300 uppercase tracking-wider",children:"Modifier"}),e("th",{class:"px-4 py-2 text-left text-xxs font-medium text-gray-300 uppercase tracking-wider",children:"Notes"}),e("th",{class:"px-4 py-2 text-left text-xxs font-medium text-gray-300 uppercase tracking-wider",children:"URL"}),e("th",{class:"px-4 py-2 text-center text-xxs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e("tbody",{class:"divide-y divide-gray-800",children:d.map(t=>e("tr",{class:"hover:bg-gray-700",children:[e("td",{class:"px-4 py-2 text-xxs text-gray-200",children:f(t.dateOfInfraction)}),e("td",{class:"px-4 py-2 text-xxs text-gray-200",children:t.modifier>0?`+${t.modifier}`:t.modifier}),e("td",{class:"px-4 py-2 text-xxs text-gray-300 max-w-[200px] truncate",children:t.description}),e("td",{class:"px-4 py-2 text-xxs text-blue-400 hover:underline",children:e("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:"Link"})}),e("td",{class:"px-4 py-2 whitespace-nowrap text-right text-xxs font-medium",children:[e("button",{type:"button",onClick:()=>u(t),class:"text-blue-500 hover:text-blue-700 mr-2",disabled:l,children:"Modify"}),e("button",{type:"button",onClick:()=>g(t),class:`font-medium py-1 px-2 rounded ${s[t.timestamp]?"bg-red-600 text-white":"text-red-500 hover:text-red-700"}`,disabled:l,children:s[t.timestamp]?"Are you sure?":"Delete"})]})]},t.timestamp))})]})})]})}export{y as a};
