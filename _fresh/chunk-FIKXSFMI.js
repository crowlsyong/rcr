import{a as e}from"./chunk-MEABNXAK.js";import{a as g,b as P}from"./chunk-NGSZJRVL.js";function h(x){let{isCustom:s,marketData:i,selectedAnswerId:p,lowerProbability:c,setLowerProbability:f,upperProbability:m,setUpperProbability:d}=x,[l,w]=g(5),r=(()=>{if(i){if(i.outcomeType==="BINARY")return i.probability;if(i.outcomeType==="MULTIPLE_CHOICE"&&p){let t=i.answers?.find(n=>n.id===p);return t?t.probability:void 0}}})(),y=r?Math.floor(Math.min(r,1-r)*100-1):50,u=Math.max(1,y);if(console.log("ProbabilityInput Render - marketProb:",r,"rawMaxOffset:",y,"clampedMaxOffset:",u),console.log("ProbabilityInput Render - isCustom:",s,"offsetPercent:",l),P(()=>{if(console.log("ProbabilityInput useEffect (isCustom, marketProb, offsetPercent) triggered."),!s&&typeof r=="number"){let t=Math.min(l,u),n=r*100-t,b=r*100+t;console.log("ProbabilityInput useEffect - Calculating relative range:",{marketProbRaw:r,marketProbPercent:r*100,currentOffset:t,calculatedLower:n,calculatedUpper:b});let o=Math.max(1,Math.min(99,Math.round(n))),a=Math.max(1,Math.min(99,Math.round(b)));o>=a&&(console.warn("ProbabilityInput useEffect - Collapsing/Inverting range detected (finalLower >= finalUpper). Attempting to fix.",{initialLower:n,initialUpper:b,finalLower:o,finalUpper:a}),o<99?a=o+1:a>1?o=a-1:(console.error("ProbabilityInput useEffect - Extreme range collapse. Falling back to 25-75."),o=25,a=75)),f(o),d(a),console.log("ProbabilityInput useEffect - Setting probabilities to:",{setLower:o,setUpper:a})}},[s,r,l,u]),s)return e("div",{class:"flex space-x-4 mt-4",children:[e("div",{class:"flex-1",children:[e("label",{htmlFor:"lower-probability",class:"sr-only",children:"Lower Probability (0-100%) for YES bet:"}),e("input",{type:"number",id:"lower-probability",name:"lowerProbability",value:c,onInput:t=>f(Math.round(Number(t.currentTarget.value))),min:"0",max:"100",step:"1",placeholder:"Lower (%) for YES",class:"block w-full border border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-800 text-gray-100",required:!0})]}),e("div",{class:"flex-1",children:[e("label",{htmlFor:"upper-probability",class:"sr-only",children:"Upper Probability (0-100%) for NO bet:"}),e("input",{type:"number",id:"upper-probability",name:"upperProbability",value:m,onInput:t=>d(Math.round(Number(t.currentTarget.value))),min:"0",max:"100",step:"1",placeholder:"Upper (%) for NO",class:"block w-full border border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-800 text-gray-100",required:!0})]})]});if(typeof r!="number"){let t=i?.outcomeType==="MULTIPLE_CHOICE"?"Please select a multiple choice option to use the slider, or switch to Custom Range.":"Market must be of type BINARY to use the relative slider. Please use Custom Range.";return e("p",{class:"text-xs sm:text-sm text-gray-400 mt-4",children:t})}return e("div",{class:"mt-4 space-y-3",children:[e("div",{children:[e("label",{htmlFor:"range-slider",class:"flex justify-between text-xs sm:text-sm font-medium text-gray-300",children:[e("span",{children:"Range around Market Probability"}),e("span",{class:"font-mono text-white",children:["+/- ",l,"%"]})]}),e("input",{id:"range-slider",type:"range",min:"1",max:u,value:l,onInput:t=>w(Number(t.currentTarget.value)),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer mt-2"})]}),e("div",{class:"text-center text-xs sm:text-sm text-gray-400 bg-gray-900/50 p-2 rounded-md",children:["Calculated Range:"," ",e("span",{class:"font-semibold text-white",children:[Math.round(c),"%"]})," ","to"," ",e("span",{class:"font-semibold text-white",children:[Math.round(m),"%"]})]})]})}export{h as a};
