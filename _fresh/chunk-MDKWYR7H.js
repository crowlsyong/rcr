import{a as B}from"./chunk-VJKCRGMR.js";import{b as d,c as T}from"./chunk-HNGXSQHJ.js";import{a as D}from"./chunk-MEABNXAK.js";import{b as C,c as x}from"./chunk-NGSZJRVL.js";d.register(...T);function M({betAmount:f,percentageInterval:m,distributionType:p,currentProbability:o,minDistributionPercentage:g,maxDistributionPercentage:y,centerShift:s,onDistributionChange:A,marketQuestion:u}){let P=x(null),i=x(null),R={id:"customBackground",beforeDraw(r){let{ctx:t,chartArea:e,scales:a}=r,l=a.x,c=a.y;if(!l||!c)return;let b=o,n=l.getPixelForValue(b),h=Math.max(0,Math.min(100,50+s)),v=l.getPixelForValue(h);t.save(),t.fillStyle="rgba(0, 128, 0, 0.1)",t.fillRect(e.left,e.top,n-e.left,e.bottom-e.top),t.fillStyle="rgba(255, 0, 0, 0.1)",t.fillRect(n,e.top,e.right-n,e.bottom-e.top),h>=0&&h<=100&&(t.strokeStyle="rgba(59, 130, 246, 0.8)",t.lineWidth=2,t.setLineDash([5,5]),t.beginPath(),t.moveTo(v,e.top),t.lineTo(v,e.bottom),t.stroke(),t.setLineDash([])),t.restore()}},k=(r,t)=>{let{allXAxisLabels:e,mainDatasetData:a,finalPaddedMaxY:l,barIndex:c,calculatedPoints:b}=B({betAmount:t.betAmount,percentageInterval:t.percentageInterval,distributionType:t.distributionType,currentProbability:t.currentProbability,minDistributionPercentage:t.minDistributionPercentage,maxDistributionPercentage:t.maxDistributionPercentage,centerShift:t.centerShift});if(A(b),r.options.scales?.y&&(r.options.scales.y.max=l),r.data.labels=e,r.data.datasets[0].data=a,r.data.datasets[0].label="Bet Amount",r.data.datasets[1]){let n=new Array(e.length).fill(null);c!==-1&&(n[c]=l),r.data.datasets[1].data=n,r.data.datasets[1].label="Current Probability"}r.options.plugins?.title&&(r.options.plugins.title.text=`${t.marketQuestion}`),r.update("none")};return C(()=>{let t=P.current?.getContext("2d");if(!t)return;i.current?.destroy(),i.current=new d(t,{type:"line",data:{labels:[],datasets:[{type:"line",label:"Bet Amount",data:[],fill:!1,borderColor:"rgb(75, 192, 192)",tension:.3,pointHitRadius:20,pointRadius:5,order:2,spanGaps:!0},{type:"bar",label:"Current Probability",data:[],backgroundColor:"rgba(255, 255, 0, 0.4)",borderColor:"rgba(255, 255, 0, 0.6)",borderWidth:1,barPercentage:1.5,categoryPercentage:1.5,order:1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{labels:{color:"#f0f0f0"}},title:{display:!0,text:`Market: ${u}`,color:"#E5E7EB",font:{size:14}},tooltip:{callbacks:{title:function(a){return a[0].dataset.type==="bar"?"Probability":a[0].label},label:function(a){return a.dataset.type==="bar"?a.label:`${a.dataset.label}: ${Math.round(a.parsed.y)}`}}}},scales:{x:{type:"category",title:{display:!0,text:"Probability (%)",color:"#D1D5DB"},ticks:{color:"#ccc",callback:function(a,l,c){let b=this.getLabelForValue(a),n=parseFloat(b);return n===0||n===100||n%25===0?n.toFixed(0)+"%":null}},grid:{color:"#444"}},y:{beginAtZero:!0,max:1e3,title:{display:!0,text:"Bet Amount",color:"#D1D5DB"},ticks:{color:"#ccc",callback:function(a){return Math.round(Number(a))}},grid:{color:"#444"}}}},plugins:[R]});let e=setTimeout(()=>{i.current&&k(i.current,{betAmount:f,percentageInterval:m,distributionType:p,currentProbability:o,minDistributionPercentage:g,maxDistributionPercentage:y,centerShift:s,marketQuestion:u})},0);return()=>{clearTimeout(e),i.current?.destroy()}},[o,s,u]),C(()=>{i.current&&k(i.current,{betAmount:f,percentageInterval:m,distributionType:p,currentProbability:o,minDistributionPercentage:g,maxDistributionPercentage:y,centerShift:s,marketQuestion:u})},[f,m,p,o,g,y,s,u]),D("div",{class:"bg-gray-800 p-6 rounded-lg shadow-lg relative h-[450px] w-full",children:D("canvas",{ref:P})})}export{M as a};
