import{b as i}from"./chunk-CRCKSX74.js";import"./chunk-GI7LLYGM.js";import{a as p}from"./chunk-DT2WSX4O.js";import"./chunk-DGI52A4N.js";import"./chunk-URWAKGWD.js";import{a as e}from"./chunk-MEABNXAK.js";import{b as x}from"./chunk-NGSZJRVL.js";import"./chunk-V66ALGLP.js";var f=5*60*1e3,h=1e3;function y({usernames:r}){let s=i(null),n=i(null),d=i(""),v=i(""),m=i(!0),o=i(f);async function g(t,a,u){try{let c=await(await fetch(`/api/v0/credit-score?username=${encodeURIComponent(t)}`)).json();c.error?(u.value=c.error,a.value=null):c.userExists?(a.value=c,u.value=""):(u.value=`User '${t}' not found.`,a.value=null)}catch(l){let c=typeof l=="object"&&l!==null&&"message"in l?l.message:String(l);u.value=`Error fetching data for ${t}: ${c}`,a.value=null,console.error(`Error fetching data for ${t}:`,l)}}x(()=>{m.value=!0,s.value=null,n.value=null,d.value="",v.value="",o.value=f;let t=async()=>{m.value=!0,o.value=f,r[0]?await g(r[0],s,d):(s.value=null,d.value="No username provided for Contestant A."),r[1]?await g(r[1],n,v):(n.value=null,v.value="No username provided for Contestant B."),m.value=!1};t();let a=setInterval(t,f);return()=>clearInterval(a)},[r]),x(()=>{let t,a=()=>{o.value=Math.max(0,o.value-h)};return o.value>0&&(t=setInterval(a,h)),()=>{t&&clearInterval(t)}},[o.value]);let S=t=>{let a=Math.floor(t/h),u=Math.floor(a/60),l=a%60;return`${u.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},b=r.length>=1&&!!r[0]||r.length>=2&&!!r[1],w=s.value||n.value;return b?e("div",{class:"flex flex-col w-full max-w-screen-xl mx-auto items-center justify-start relative md:pb-20 pb-4",children:[e("div",{class:"flex flex-col md:flex-row gap-4 w-full justify-center items-start md:mb-8",children:[e("div",{class:"w-full md:w-5/12 flex flex-col items-center",children:[e("h2",{class:"text-md md:text-2xl font-bold text-white mb-4",children:"Contestant A"}),e("div",{class:"w-4/5 mx-auto",children:m.value&&!w?e("p",{class:"text-gray-400",children:"Loading..."}):d.value?e("p",{class:"text-red-500 text-center",children:d.value}):e(p,{username:s.value?.username||"N/A",creditScore:s.value?.creditScore||0,riskBaseFee:s.value?.riskBaseFee||0,avatarUrl:s.value?.avatarUrl||null,isWaiting:!1,urlPrefix:"https://manifold.markets"})})]}),e("div",{class:"hidden md:block md:w-auto h-1 md:h-64 bg-gray-700 md:my-0 my-4 md:mx-4"}),e("div",{class:"w-full md:w-5/12 flex flex-col items-center",children:[e("h2",{class:"text-md md:text-2xl font-bold text-white mb-4",children:"Contestant B"}),e("div",{class:"w-4/5 mx-auto",children:m.value&&!w?e("p",{class:"text-gray-400",children:"Loading..."}):v.value?e("p",{class:"text-red-500 text-center",children:v.value}):e(p,{username:n.value?.username||"N/A",creditScore:n.value?.creditScore||0,riskBaseFee:n.value?.riskBaseFee||0,avatarUrl:n.value?.avatarUrl||null,isWaiting:!1,urlPrefix:"https://manifold.markets"})})]})]}),e("div",{class:"w-full text-center text-gray-200 text-sm md:text-base mt-auto py-4",children:e("p",{class:"text-xl md:text-4xl mb-2",children:["Credit Scores refresh in"," ",e("span",{class:"font-bold text-white",children:S(o.value)})]})})]}):e("div",{class:"flex items-center justify-center min-h-screen text-gray-300",children:"Please provide at least two usernames in the URL, e.g., `/gameshow/user1,user2`"})}export{y as default};
